
<html>
    <title>Orders</title>
    <head>
        <script src="https://code.jquery.com/jquery-3.4.1.js"></script>  
    </head>
    <body>
        <h2> Ordering </h2>
        <h3>search orders ajax utlization</h3>
        <br>
        <p>enter your order</p>
        <form>
            <label for="Categories"> Select Catergory</label> 
            <select id="Catergories">
                <option value="*">-Select-</option>
            </select>
            <br>
            <label for="Products"> Select Product</label>
            <select id="Products">
                <option value="*">-Select-</option>
            </select>
            <br>
            <input type="submit" id="submit" value="submit">
         </form>

         <div id="ppiTable" > 
        </div>
        <script type="text/javascript">
            //document ready function
            $(document).ready(function(){ // wait until doc. completely loaded
                updatecategoryInput();  
                    
                $('#Categories').on('change', function(){
                    updateproductsInput();
                });
                
                $("form").on('submit', function(event){
                    event.preventDefault();
                   
                });
            });
            var updatecategoryInput = function(){
                //get the gene names into the target gene drop down menu
                //use ajax here
                //note the different parameters and the function used to write the new options
                $.ajax({
                    url: 'https://bioed.bu.edu/cgi-bin/students_20/cwill96/Searchpage_cgi.py',
                    type: 'get',
                    //it's important to write the data correctly, name:value pairs, as strings, in braces 
                    data: {'table':'Categories'},
                    //define a function to use the ajax response
                    success: function(response){
                        //trim off the trailing newline in the response, split the response into parts at the 
                        //remaining new lines, and store the parts in the lines array
                        //for each line of the response, write an input option 
                        var lines = response.trim().split("\n");
                        lines.forEach(function(value){
                            //.append means to add at the end of what's already there in this element
                            $("#Categories").append("<option value='"+value+"'>"+value+"</option>");
                        });
                    }
                });
            };
            var updateproductsInput = function(){
                //get the pathway names into the pathway drop down menu
                //use ajax here
                //note we have to send the gene name to get the related pathways
                product_name=$("#Products").val();
                $.ajax({
                    url: 'http://localhost/cgi-bin/getInfoFromPathwaysDbForAjax.py',
                    type: 'get',
                    //it's important to get the form of the data right, 
                    //name:value pairs, as strings, separated by commas, in braces 
                    data: {'table':'Products','product_name':product_name},
                    success: function(response){
                        // clear any existing pathway options from a previous selection
                        $("#Products").empty();
                        $("#Products").append("<option value='*'>- Select -</option>")
                        //trim off the trailing newline in the response, split the response into parts at the 
                        //remaining new lines, and store the parts in the lines array
                        //for each line of the response, write an input option 
                        var lines = response.trim().split("\n");
                        lines.forEach(function(value){
                            //.append means to add at the end of what's already there in this element
                            $("#Products").append("<option value='"+value+"'>"+value+"</option>");
                        });
                    }
                });
                
            };
    </body>
</html>